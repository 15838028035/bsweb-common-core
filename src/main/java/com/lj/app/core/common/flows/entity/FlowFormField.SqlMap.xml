<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE sqlMap PUBLIC "-//ibatis.apache.org//DTD SQL Map 2.0//EN" 
    "http://ibatis.apache.org/dtd/sql-map-2.dtd">

<sqlMap namespace="flowFormField">

    <typeAlias alias="flowFormField" type="com.lj.app.core.common.flows.entity.FlowFormField"/>

    <resultMap id="flowFormFieldResult" class="flowFormField">
   	  	<result property="id" column="id"   />
   	  	<result property="name" column="name"   />
   	  	<result property="plugins" column="plugins"   />
   	  	<result property="title" column="title"   />
   	  	<result property="type" column="type"   />
   	  	<result property="flow" column="flow"   />
   	  	<result property="tableName" column="table_name"   />
   	  	<result property="formId" column="form_id"   />
    </resultMap>

	<sql id="dynamicWhere">
	    <dynamic prepend="WHERE">
	       <isNotEmpty prepend="AND" property="id">
	             id = #id#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="name">
	             name = #name#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="plugins">
	             plugins = #plugins#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="title">
	             title = #title#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="type">
	             type = #type#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="flow">
	             flow = #flow#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="tableName">
	             table_name = #tableName#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	       <isNotEmpty prepend="AND" property="formId">
	             form_id = #formId#
	       </isNotEmpty>
			 <isNotEmpty prepend="AND" property="conditionWhere">
	       		 #conditionWhere#
	       </isNotEmpty>       
	    </dynamic>	
	</sql>

	<sql id="commonSelectColumnsPrefix">
	    <![CDATA[
	    select
        	id ,
        	name ,
        	plugins ,
        	title ,
        	type ,
        	flow ,
        	table_name ,
        	form_id 
	    ]]>
	</sql>
	
    <insert id="insert" parameterClass="flowFormField">
        <selectKey resultClass="int" keyProperty="id"  type="post">
             SELECT LAST_INSERT_ID()
        </selectKey>

	    <![CDATA[
	        INSERT INTO
	        flow_form_field (
	        	id ,
	        	name ,
	        	plugins ,
	        	title ,
	        	type ,
	        	flow ,
	        	table_name ,
	        	form_id 
	        ) VALUES (
				#id# ,
				#name# ,
				#plugins# ,
				#title# ,
				#type# ,
				#flow# ,
				#tableName# ,
				#formId# 
	        )
	    ]]>
    </insert>
   
     <update id="update" >
    <![CDATA[
        UPDATE flow_form_field 
      ]]>
      <dynamic prepend="set"> 
	        <isNotEmpty prepend="," property="id">
				id = #id#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="name">
				name = #name#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="plugins">
				plugins = #plugins#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="title">
				title = #title#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="type">
				type = #type#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="flow">
				flow = #flow#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="tableName">
				table_name = #tableName#
			</isNotEmpty>
	        <isNotEmpty prepend="," property="formId">
				form_id = #formId#
			</isNotEmpty>
	        
	   </dynamic>
        WHERE 
	        id = #id# 
    </update>

    <delete id="delete" parameterClass="java.lang.Integer">
    <![CDATA[
        delete from flow_form_field where
        id = #id# 
    ]]>
    </delete>
    
    <select id="select" resultMap="flowFormFieldResult">
    	<include refid="commonSelectColumnsPrefix"/>
	    <![CDATA[
	        from flow_form_field 
	    ]]>
		<include refid="dynamicWhere"/>
		<dynamic prepend="ORDER BY">
			<isNotEmpty property="sortColumns">$sortColumns$</isNotEmpty>
		</dynamic>
    </select>
    
    <select id="getInfoByKey" resultMap="flowFormFieldResult">
	    <include refid="commonSelectColumnsPrefix"/>
	    <![CDATA[
	        from flow_form_field 
	        where 
		        id = #id# 
	    ]]>
    </select>

 	<select id="pagenate" resultMap="flowFormFieldResult">
    	<include refid="commonSelectColumnsPrefix"/>
	    <![CDATA[
	        from flow_form_field 
	    ]]>
		<include refid="dynamicWhere"/>
		<dynamic prepend="ORDER BY">
			<isNotEmpty property="sortColumns">$sortColumns$</isNotEmpty>
		</dynamic>
    </select>
    
    <select id="pagenate_count" resultClass="long">
    <![CDATA[
        select 
        count(*)
        from flow_form_field
    ]]>
		<include refid="dynamicWhere"/>    
    </select>

</sqlMap>
